<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Your Kinetic Plan | Kinetic AI</title>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #2dd4bf;
      --bg-dark: #020617;
      --card-bg: rgba(255, 255, 255, 0.03);
      --glass-border: rgba(255, 255, 255, 0.1);
      --text-main: #f8fafc;
      --text-dim: #94a3b8;
      --accent-gold: #fbbf24;
    }

    body {
      font-family: 'Plus Jakarta Sans', sans-serif;
      background-color: var(--bg-dark);
      color: var(--text-main);
      margin: 0;
      padding: 40px 5%;
      line-height: 1.6;
    }

    .container { max-width: 1100px; margin: 0 auto; }

    /* Header Section */
    .header { text-align: center; margin-bottom: 50px; }
    .header h1 { font-size: 2.5rem; margin-bottom: 10px; font-weight: 800; }
    .header span { color: var(--primary); }
    .badge { background: var(--primary); color: #000; padding: 5px 15px; border-radius: 50px; font-weight: 800; font-size: 0.8rem; text-transform: uppercase; letter-spacing: 1px; }

    /* Metrics Grid */
    .metrics-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-bottom: 40px;
    }

    .metric-card {
      background: var(--card-bg);
      border: 1px solid var(--glass-border);
      padding: 25px;
      border-radius: 24px;
      text-align: center;
      backdrop-filter: blur(10px);
    }

    .metric-card h3 { color: var(--text-dim); font-size: 0.75rem; text-transform: uppercase; letter-spacing: 1px; margin: 0 0 10px; }
    .metric-card p { font-size: 1.8rem; font-weight: 800; margin: 0; color: var(--primary); }
    .status-badge { font-size: 0.7rem; color: var(--text-dim); display: block; margin-top: 5px; opacity: 0.8; }

    /* AI Tips Section */
    .tips-box {
      background: rgba(45, 212, 191, 0.05);
      border: 1px solid var(--primary);
      border-radius: 24px;
      padding: 25px;
      margin-bottom: 40px;
    }
    .tips-box h3 { color: var(--primary); margin: 0 0 15px; font-size: 1.1rem; display: flex; align-items: center; gap: 10px; }
    .tips-content { white-space: pre-wrap; color: var(--text-main); font-size: 0.95rem; }

    /* 7-Day Plan Table */
    .plan-section {
      background: var(--card-bg);
      border: 1px solid var(--glass-border);
      border-radius: 32px;
      padding: 35px;
      overflow-x: auto;
    }

    table { width: 100%; border-collapse: collapse; min-width: 800px; }
    th { text-align: left; color: var(--text-dim); padding: 15px; border-bottom: 1px solid var(--glass-border); font-size: 0.85rem; text-transform: uppercase; }
    td { padding: 20px 15px; border-bottom: 1px solid rgba(255,255,255,0.05); vertical-align: top; }

    .day-label { font-weight: 800; color: var(--primary); font-size: 1.1rem; }
    .workout-label { font-weight: 700; color: var(--text-main); margin-bottom: 5px; font-size: 1rem; }
    .meal-list { list-style: none; padding: 0; margin: 0; font-size: 0.9rem; color: var(--text-dim); }
    .meal-list li { margin-bottom: 6px; display: flex; align-items: center; gap: 8px; }
    .meal-list li::before { content: "‚Ä¢"; color: var(--primary); font-weight: bold; }

    /* Footer Buttons */
    .footer-actions { text-align: center; margin-top: 50px; display: flex; justify-content: center; gap: 20px; }
    .btn-back, .btn-download { 
      text-decoration: none; color: var(--text-main); border: 1px solid var(--glass-border);
      padding: 14px 35px; border-radius: 50px; font-weight: 700; transition: 0.3s;
      display: inline-block; cursor: pointer; font-family: inherit;
    }
    .btn-back:hover { background: rgba(255,255,255,0.1); transform: translateY(-2px); }
    .btn-download { background: var(--primary); color: #000; border: none; }
    .btn-download:hover { background: #5eead4; transform: translateY(-2px); box-shadow: 0 10px 20px rgba(45, 212, 191, 0.2); }

    /* Print Formatting */
    @media print {
      .footer-actions, .badge { display: none !important; }
      body { background-color: white !important; color: black !important; padding: 0; }
      .container { max-width: 100%; }
      .metric-card, .plan-section, .tips-box { 
        background: white !important; 
        color: black !important; 
        border: 1px solid #ddd !important;
        backdrop-filter: none !important;
      }
      .metric-card p, .day-label, h1 span, .tips-box h3 { color: #0d9488 !important; }
      .workout-label, .tips-content { color: black !important; }
      th { color: #666 !important; border-bottom: 2px solid #ddd !important; }
    }

    @media (max-width: 768px) {
      .metrics-grid { grid-template-columns: 1fr 1fr; }
      .footer-actions { flex-direction: column; }
    }
  </style>
</head>
<body>

  <div class="container">
    <div class="header">
      <div class="badge">Intelligence Synthesized</div>
      <h1>Optimized Plan for <span>{{ name }}</span></h1>
      <p style="color: var(--text-dim)">{{ goal.replace('_', ' ').title() }} Protocol | {{ gender.title() }} Specific</p>
    </div>

    <div class="metrics-grid">
      <div class="metric-card">
        <h3>BMI Score</h3>
        <p>{{ metrics.bmi }}</p>
        <span class="status-badge">{{ metrics.status }}</span>
      </div>
      <div class="metric-card">
        <h3>BMR (Resting)</h3>
        <p>{{ metrics.bmr }}</p>
        <span class="status-badge">Basal Metabolism</span>
      </div>
      <div class="metric-card">
        <h3>Daily Target</h3>
        <p>{{ metrics.calories }}</p>
        <span class="status-badge">kcal per day</span>
      </div>
    </div>

    <div class="tips-box">
      <h3>üí° Coach's Intelligence Tips</h3>
      <div class="tips-content">{{ tips }}</div>
    </div>

    <div class="plan-section">
      <h2 style="margin-bottom: 25px; font-size: 1.5rem;">7-Day Kinetic Protocol</h2>
      <table>
        <thead>
          <tr>
            <th>Day Cycle</th>
            <th>Workout Routine</th>
            <th>Dietary Protocol</th>
          </tr>
        </thead>
        <tbody>
          {% for day, workout_name in workout.items() %}
          <tr>
            <td class="day-label">{{ day }}</td>
            <td>
              <div class="workout-label">{{ workout_name }}</div>
            </td>
            <td>
              <ul class="meal-list">
                {% for meal in diet[day] %}
                <li>{{ meal }}</li>
                {% endfor %}
              </ul>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <div class="footer-actions">
      <a href="/" class="btn-back">‚Üê Adjust Parameters</a>
      <button onclick="window.print()" class="btn-download">Download Plan (PDF)</button>
    </div>
  </div>

</body>
</html>